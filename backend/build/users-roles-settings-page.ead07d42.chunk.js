(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[8853],{16098:(S,w,n)=>{"use strict";n.r(w),n.d(w,{default:()=>Ls});var s=n(67294),c=n(49656),o=n(68547),g=n(31498),E=n(81912),P=n(29728),y=n(17034),R=n(67838),v=n(36989),f=n(49066),h=n(185),j=n(11057),O=n(63985),T=n(47144),D=n(18374),x=n(63237),M=n(72735),W=n(14087),K=n(96315),C=n(97132),U=n(23724),I=n(63852),_=n(89031),A=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const L=(r,e)=>A(void 0,null,function*(){try{const{data:t}=yield _.be.get((0,_.Gc)("roles"));return e("The roles have loaded successfully"),t}catch(t){throw r({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),$=(r,e)=>A(void 0,null,function*(){try{yield _.be.delete(`${(0,_.Gc)("roles")}/${r}`)}catch(t){e({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var Z=n(45697),N=n.n(Z),ee=n(12028),te=n(46273),se=n(550),ie=n(4585),me=n(20022),ge=Object.defineProperty,H=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,fe=(r,e,t)=>e in r?ge(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,q=(r,e)=>{for(var t in e||(e={}))le.call(e,t)&&fe(r,t,e[t]);if(H)for(var t of H(e))J.call(e,t)&&fe(r,t,e[t]);return r};const ce=({sortedRoles:r,canDelete:e,permissions:t,setRoleToDelete:l,onDelete:p})=>{const{formatMessage:d}=(0,C.useIntl)(),{push:m}=(0,c.useHistory)(),[i,a]=p,u=b=>e&&!["public","authenticated"].includes(b.type),B=b=>{l(b),a(!i)},F=b=>{m(`/settings/${g.Z}/roles/${b}`)};return s.createElement(se.p,null,r==null?void 0:r.map(b=>s.createElement(T.Tr,q({key:b.name},(0,o.onRowClick)({fn:()=>F(b.id)})),s.createElement(D.Td,{width:"20%"},s.createElement(M.Z,null,b.name)),s.createElement(D.Td,{width:"50%"},s.createElement(M.Z,null,b.description)),s.createElement(D.Td,{width:"30%"},s.createElement(M.Z,null,`${b.nb_users} ${d({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),s.createElement(D.Td,null,s.createElement(te.k,q({justifyContent:"end"},o.stopPropagation),s.createElement(o.CheckPermissions,{permissions:t.updateRole},s.createElement(ee.h,{onClick:()=>F(b.id),noBorder:!0,icon:s.createElement(ie.Z,null),label:d({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${b.name}`})})),u(b)&&s.createElement(o.CheckPermissions,{permissions:t.deleteRole},s.createElement(ee.h,{onClick:()=>B(b.id),noBorder:!0,icon:s.createElement(me.default,null),label:d({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${b.name}`})})))))))},ve=ce;ce.defaultProps={canDelete:!1},ce.propTypes={onDelete:N().array.isRequired,permissions:N().object.isRequired,setRoleToDelete:N().func.isRequired,sortedRoles:N().array.isRequired,canDelete:N().bool};var Ee=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const Pe=()=>{const{trackUsage:r}=(0,o.useTracking)(),{formatMessage:e}=(0,C.useIntl)(),{push:t}=(0,c.useHistory)(),l=(0,o.useNotification)(),{notifyStatus:p}=(0,W.G)(),[{query:d}]=(0,o.useQueryParams)(),m=(d==null?void 0:d._q)||"",[i,a]=(0,s.useState)(!1),[u,B]=(0,s.useState)(!1),[F,b]=(0,s.useState)();(0,o.useFocusWhenNavigate)();const V=(0,U.useQueryClient)(),G=(0,s.useMemo)(()=>({create:E.Z.createRole,read:E.Z.readRoles,update:E.Z.updateRole,delete:E.Z.deleteRole}),[]),{isLoading:Q,allowedActions:{canRead:X,canDelete:oe}}=(0,o.useRBAC)(G),{isLoading:ws,data:{roles:xe},isFetching:Ss}=(0,U.useQuery)("get-roles",()=>L(l,p),{initialData:{},enabled:X}),Et=ws||Ss,js=()=>{r("willCreateRole"),t(`/settings/${g.Z}/roles/new`)},Us=()=>{a(!i)},_s={roles:{id:(0,_.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,_.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Bs=e({id:"global.roles",defaultMessage:"Roles"}),Is=(0,U.useMutation)(Ks=>$(Ks,l),{onSuccess(){return Ee(this,null,function*(){yield V.invalidateQueries("get-roles")})}}),$s=()=>Ee(void 0,null,function*(){B(!0),yield Is.mutateAsync(F),a(!i),B(!1)}),pe=(0,I.ZP)(xe||[],m,{keys:["name","description"]}),Zs=m&&!pe.length?"search":"roles",Ns=4,Fs=((xe==null?void 0:xe.length)||0)+1;return s.createElement(y.A,null,s.createElement(o.SettingsPageTitle,{name:Bs}),s.createElement(h.o,{"aria-busy":Et},s.createElement(R.T,{title:e({id:"global.roles",defaultMessage:"Roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:s.createElement(o.CheckPermissions,{permissions:E.Z.createRole},s.createElement(P.z,{onClick:js,startIcon:s.createElement(K.default,null),size:"S"},e({id:(0,_.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),s.createElement(v.Z,{startActions:s.createElement(o.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search"})})}),s.createElement(f.D,null,!X&&s.createElement(o.NoPermissions,null),(Et||Q)&&s.createElement(o.LoadingIndicatorPage,null),X&&pe&&(pe==null?void 0:pe.length)?s.createElement(j.i,{colCount:Ns,rowCount:Fs},s.createElement(O.h,null,s.createElement(T.Tr,null,s.createElement(D.Th,null,s.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),s.createElement(D.Th,null,s.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),s.createElement(D.Th,null,s.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),s.createElement(D.Th,null,s.createElement(x.T,null,e({id:"global.actions",defaultMessage:"Actions"}))))),s.createElement(ve,{sortedRoles:pe,canDelete:oe,permissions:E.Z,setRoleToDelete:b,onDelete:[i,a]})):s.createElement(o.EmptyStateLayout,{content:_s[Zs]})),s.createElement(o.ConfirmDialog,{isConfirmButtonLoading:u,onConfirm:$s,onToggleDialog:Us,isOpen:i})))},Te=()=>s.createElement(o.CheckPagePermissions,{permissions:E.Z.accessRoles},s.createElement(Pe,null));var ye=n(80831),k=n(7681),z=n(35961),he=n(16364),ue=n(64256),Oe=n(67109),we=n(85018),be=n(11276),re=n(74571),ne=n(84757),Y=n(96486);const Se=(0,s.createContext)({}),je=({children:r,value:e})=>s.createElement(Se.Provider,{value:e},r),Ae=()=>(0,s.useContext)(Se);je.propTypes={children:N().node.isRequired,value:N().object.isRequired};var Re=n(71893),Pt=n(35161),yt=n.n(Pt),ht=n(13217),Ot=n.n(ht);const bt=r=>{switch(r){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Rt=(0,Re.default)(z.x)`
  margin: -1px;
  border-radius: ${({theme:r})=>r.spaces[1]} 0 0 ${({theme:r})=>r.spaces[1]};
`;function Me({route:r}){const{formatMessage:e}=(0,C.useIntl)(),{method:t,handler:l,path:p}=r,d=p?Ot()(p.split("/")):[],[m="",i=""]=l?l.split("."):[],a=bt(r.method);return s.createElement(k.K,{spacing:2},s.createElement(M.Z,{variant:"delta",as:"h3"},e({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",s.createElement("span",null,m),s.createElement(M.Z,{variant:"delta",textColor:"primary600"},".",i)),s.createElement(k.K,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0},s.createElement(Rt,{background:a.background,borderColor:a.border,padding:2},s.createElement(M.Z,{fontWeight:"bold",textColor:a.text},t)),s.createElement(z.x,{paddingLeft:2,paddingRight:2},yt()(d,u=>s.createElement(M.Z,{key:u,textColor:u.includes(":")?"neutral600":"neutral900"},"/",u)))))}Me.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},Me.propTypes={route:N().shape({handler:N().string,method:N().string,path:N().string})};const Ct=Me,Dt=()=>{const{formatMessage:r}=(0,C.useIntl)(),{selectedAction:e,routes:t}=Ae(),l=(0,Y.without)(e.split("."),"controllers"),p=(0,Y.get)(t,l[0]),d=l.slice(1).join("."),m=(0,Y.isEmpty)(p)?[]:p.filter(i=>i.handler.endsWith(d));return s.createElement(re.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},e?s.createElement(k.K,{spacing:2},m.map((i,a)=>s.createElement(Ct,{key:a,route:i}))):s.createElement(k.K,{spacing:2},s.createElement(M.Z,{variant:"delta",as:"h3"},r({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),s.createElement(M.Z,{as:"p",textColor:"neutral600"},r({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var Tt=n(48734),At=n(74756),Mt=n(63081),xt=n(11700),Lt=n.n(xt);function wt(r){switch(r){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Lt()(r.replace("api::","").replace("plugin::",""))}}const St=wt;var jt=n(89734),Ue=n.n(jt),_e=n(36213),Ut=n(78114);const Be=Re.css`
  background: ${r=>r.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,_t=(0,Re.default)(z.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${r=>r.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${r=>r.isActive&&Be}
  &:hover {
    ${Be}
  }
`,Bt=Re.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:r})=>r.colors.neutral150};
`,Ie=({subCategory:r})=>{const{formatMessage:e}=(0,C.useIntl)(),{onChange:t,onChangeSelectAll:l,onSelectedAction:p,selectedAction:d,modifiedData:m}=Ae(),i=(0,s.useMemo)(()=>(0,Y.get)(m,r.name,{}),[m,r]),a=(0,s.useMemo)(()=>Object.values(i).every(b=>b.enabled===!0),[i]),u=(0,s.useMemo)(()=>Object.values(i).some(b=>b.enabled===!0)&&!a,[i,a]),B=(0,s.useCallback)(({target:{name:b}})=>{l({target:{name:b,value:!a}})},[a,l]),F=(0,s.useCallback)(b=>d===b,[d]);return s.createElement(z.x,null,s.createElement(te.k,{justifyContent:"space-between",alignItems:"center"},s.createElement(z.x,{paddingRight:4},s.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},r.label)),s.createElement(Bt,null),s.createElement(z.x,{paddingLeft:4},s.createElement(_e.X,{name:r.name,value:a,onValueChange:b=>B({target:{name:r.name,value:b}}),indeterminate:u},e({id:"app.utils.select-all",defaultMessage:"Select all"})))),s.createElement(te.k,{paddingTop:6,paddingBottom:6},s.createElement(be.r,{gap:2,style:{flex:1}},r.actions.map(b=>{const V=`${b.name}.enabled`;return s.createElement(re.P,{col:6,key:b.name},s.createElement(_t,{isActive:F(b.name),padding:2,hasRadius:!0},s.createElement(_e.X,{value:(0,Y.get)(m,V,!1),name:V,onValueChange:G=>t({target:{name:V,value:G}})},b.label),s.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>p(b.name),style:{display:"inline-flex",alignItems:"center"}},s.createElement(Ut.Z,null))))}))))};Ie.propTypes={subCategory:N().object.isRequired};const It=Ie;var $t=Object.defineProperty,Zt=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,Ze=(r,e,t)=>e in r?$t(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Gt=(r,e)=>{for(var t in e||(e={}))Ft.call(e,t)&&Ze(r,t,e[t]);if($e)for(var t of $e(e))Kt.call(e,t)&&Ze(r,t,e[t]);return r},Wt=(r,e)=>Zt(r,Nt(e));const Ne=({name:r,permissions:e})=>{const t=(0,s.useMemo)(()=>Ue()(Object.values(e.controllers).reduce((l,p,d)=>{const m=`${r}.controllers.${Object.keys(e.controllers)[d]}`,i=Ue()(Object.keys(p).reduce((a,u)=>[...a,Wt(Gt({},p[u]),{label:u,name:`${m}.${u}`})],[]),"label");return[...l,{actions:i,label:Object.keys(e.controllers)[d],name:m}]},[]),"label"),[r,e]);return s.createElement(z.x,{padding:6},t.map(l=>s.createElement(It,{key:l.name,subCategory:l})))};Ne.propTypes={name:N().string.isRequired,permissions:N().object.isRequired};const Vt=Ne;var kt=Object.defineProperty,zt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Ke=(r,e,t)=>e in r?kt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Yt=(r,e)=>{for(var t in e||(e={}))Qt.call(e,t)&&Ke(r,t,e[t]);if(Fe)for(var t of Fe(e))Xt.call(e,t)&&Ke(r,t,e[t]);return r},Jt=(r,e)=>zt(r,Ht(e));const qt=(r,e)=>{const t=Object.keys(e).sort().map(l=>({name:l,isOpen:!1}));return Jt(Yt({},r),{collapses:t})};var Ce=n(18172),er=Object.defineProperty,tr=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable,We=(r,e,t)=>e in r?er(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ve=(r,e)=>{for(var t in e||(e={}))sr.call(e,t)&&We(r,t,e[t]);if(Ge)for(var t of Ge(e))nr.call(e,t)&&We(r,t,e[t]);return r},ke=(r,e)=>tr(r,rr(e));const ar={collapses:[]},or=(r,e)=>(0,Ce.default)(r,t=>{switch(e.type){case"TOGGLE_COLLAPSE":{t.collapses=r.collapses.map((l,p)=>p===e.index?ke(Ve({},l),{isOpen:!l.isOpen}):ke(Ve({},l),{isOpen:!1}));break}default:return t}}),ir=()=>{const{modifiedData:r}=Ae(),{formatMessage:e}=(0,C.useIntl)(),[{collapses:t},l]=(0,s.useReducer)(or,ar,d=>qt(d,r)),p=d=>l({type:"TOGGLE_COLLAPSE",index:d});return s.createElement(k.K,{spacing:1},t.map((d,m)=>s.createElement(Tt.U,{expanded:d.isOpen,onToggle:()=>p(m),key:d.name,variant:m%2===0?"secondary":void 0},s.createElement(At.B,{title:St(d.name),description:e({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:d.name}),variant:m%2?"primary":"secondary"}),s.createElement(Mt.v,null,s.createElement(z.x,null,s.createElement(Vt,{permissions:r[d.name],name:d.name}))))))};var lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,He=(r,e,t)=>e in r?lr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mr=(r,e)=>{for(var t in e||(e={}))ur.call(e,t)&&He(r,t,e[t]);if(ze)for(var t of ze(e))pr.call(e,t)&&He(r,t,e[t]);return r},gr=(r,e)=>cr(r,dr(e));const fr={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},vr=(r,e)=>(0,Ce.default)(r,t=>{switch(e.type){case"ON_CHANGE":{const l=e.keys.length,p=e.keys[l-1]==="enabled";if(e.value&&p){const d=(0,Y.take)(e.keys,l-1).join(".");t.selectedAction=d}(0,Y.set)(t,["modifiedData",...e.keys],e.value);break}case"ON_CHANGE_SELECT_ALL":{const l=["modifiedData",...e.keys],p=(0,Y.get)(r,l,{}),d=Object.keys(p).reduce((m,i)=>(m[i]=gr(mr({},p[i]),{enabled:e.value}),m),{});(0,Y.set)(t,l,d);break}case"ON_RESET":{t.modifiedData=r.initialData;break}case"ON_SUBMIT_SUCCEEDED":{t.initialData=r.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:l}=e;t.selectedAction=l===r.selectedAction?"":l;break}default:return t}});var Er=Object.defineProperty,Pr=Object.defineProperties,yr=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Xe=(r,e,t)=>e in r?Er(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,br=(r,e)=>{for(var t in e||(e={}))hr.call(e,t)&&Xe(r,t,e[t]);if(Qe)for(var t of Qe(e))Or.call(e,t)&&Xe(r,t,e[t]);return r},Rr=(r,e)=>Pr(r,yr(e));const Cr=(r,e,t)=>Rr(br({},r),{initialData:e,modifiedData:e,routes:t});var Dr=Object.defineProperty,Tr=Object.defineProperties,Ar=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Mr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,Je=(r,e,t)=>e in r?Dr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Lr=(r,e)=>{for(var t in e||(e={}))Mr.call(e,t)&&Je(r,t,e[t]);if(Ye)for(var t of Ye(e))xr.call(e,t)&&Je(r,t,e[t]);return r},wr=(r,e)=>Tr(r,Ar(e));const qe=(0,s.forwardRef)(({permissions:r,routes:e},t)=>{const{formatMessage:l}=(0,C.useIntl)(),[p,d]=(0,s.useReducer)(vr,fr,B=>Cr(B,r,e));(0,s.useImperativeHandle)(t,()=>({getPermissions(){return{permissions:p.modifiedData}},resetForm(){d({type:"ON_RESET"})},setFormAfterSubmit(){d({type:"ON_SUBMIT_SUCCEEDED"})}}));const m=({target:{name:B,value:F}})=>d({type:"ON_CHANGE",keys:B.split("."),value:F==="empty__string_value"?"":F}),i=({target:{name:B,value:F}})=>d({type:"ON_CHANGE_SELECT_ALL",keys:B.split("."),value:F}),a=B=>d({type:"SELECT_ACTION",actionToSelect:B}),u=wr(Lr({},p),{onChange:m,onChangeSelectAll:i,onSelectedAction:a});return s.createElement(je,{value:u},s.createElement(be.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},s.createElement(re.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(k.K,{spacing:6},s.createElement(k.K,{spacing:2},s.createElement(M.Z,{variant:"delta",as:"h2"},l({id:(0,ne.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),s.createElement(M.Z,{as:"p",textColor:"neutral600"},l({id:(0,ne.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),s.createElement(ir,null))),s.createElement(Dt,null)))});qe.propTypes={permissions:N().object.isRequired,routes:N().object.isRequired};const et=(0,s.memo)(qe),Xs={isLoading:!0,modifiedData:{}},Ys=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.modifiedData={};break}case"GET_DATA_SUCCEEDED":{t.isLoading=!1,t.modifiedData=e.data;break}case"GET_DATA_ERROR":{t.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{t.modifiedData=e.data;break}default:return t}}),Js=null;var Sr=n(25108),jr=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const qs=(r,e)=>{const{isLoading:t,allowedActions:l}=useRBAC(e),[{isLoading:p,modifiedData:d},m]=useReducer(reducer,initialState),i=useNotification(),a=useRef(!0),u=new AbortController,{signal:B}=u;useEffect(()=>(t||(()=>jr(void 0,null,function*(){try{m({type:"GET_DATA"});const V=yield request(getRequestURL(r),{method:"GET",signal:B});m({type:"GET_DATA_SUCCEEDED",data:V})}catch(V){a.current&&(m({type:"GET_DATA_ERROR"}),Sr.error(V),i({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{u.abort(),a.current=!1}),[t,r]);const F=useCallback(b=>{m({type:"ON_SUBMIT_SUCCEEDED",data:b})},[]);return{allowedActions:l,dispatchSubmitSucceeded:F,isLoading:p,isLoadingForPermissions:t,modifiedData:d}},en=null;var Ur=Object.defineProperty,_r=Object.defineProperties,Br=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,rt=(r,e,t)=>e in r?Ur(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zr=(r,e)=>{for(var t in e||(e={}))Ir.call(e,t)&&rt(r,t,e[t]);if(tt)for(var t of tt(e))$r.call(e,t)&&rt(r,t,e[t]);return r},Nr=(r,e)=>_r(r,Br(e));const tn=(r,e)=>Nr(Zr({},r),{isLoading:e}),rn=null,sn={roles:[],isLoading:!0},nn=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.roles=[];break}case"GET_DATA_SUCCEEDED":{t.roles=e.data,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}}),an=null;var Fr=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const on=(r=!0)=>{const[{roles:e,isLoading:t},l]=useReducer(reducer,initialState,()=>init(initialState,r)),p=useNotification(),d=useRef(!0),m=new AbortController,{signal:i}=m;useEffect(()=>(r&&a(),()=>{m.abort(),d.current=!1}),[r]);const a=()=>Fr(void 0,null,function*(){try{l({type:"GET_DATA"});const{roles:u}=yield request(`/${pluginId}/roles`,{method:"GET",signal:i});l({type:"GET_DATA_SUCCEEDED",data:u})}catch(u){const B=get(u,["response","payload","message"],"An error occured");d.current&&(l({type:"GET_DATA_ERROR"}),B!=="Forbidden"&&p({type:"warning",message:B}))}});return{roles:e,isLoading:t,getData:a}},ln=null;var Kr=Object.defineProperty,Gr=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,Vr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,nt=(r,e,t)=>e in r?Kr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,zr=(r,e)=>{for(var t in e||(e={}))Vr.call(e,t)&&nt(r,t,e[t]);if(st)for(var t of st(e))kr.call(e,t)&&nt(r,t,e[t]);return r},Hr=(r,e)=>Gr(r,Wr(e));const Qr=(r,e)=>Hr(zr({},r),{isLoading:e});var De=n(46979);const at={permissions:{},routes:{},isLoading:!0},Xr=(r,e)=>(0,Ce.default)(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.permissions={},t.routes={};break}case"GET_DATA_SUCCEEDED":{t.permissions=e.permissions,t.routes=e.routes,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}});var ot=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const it=(r=!0)=>{const e=(0,o.useNotification)(),[{permissions:t,routes:l,isLoading:p},d]=(0,s.useReducer)(Xr,at,()=>Qr(at,r)),m=(0,s.useCallback)(()=>ot(void 0,null,function*(){try{d({type:"GET_DATA"});const[{permissions:i},{routes:a}]=yield Promise.all([`/${g.Z}/permissions`,`/${g.Z}/routes`].map(u=>ot(void 0,null,function*(){return(yield De.Z.get(u)).data})));d({type:"GET_DATA_SUCCEEDED",permissions:(0,_.YX)(i),routes:a})}catch(i){const a=(0,Y.get)(i,["response","payload","message"],"An error occured");d({type:"GET_DATA_ERROR"}),a!=="Forbidden"&&e({type:"warning",message:a})}}),[e]);return(0,s.useEffect)(()=>{r&&m()},[m,r]),{permissions:t,routes:l,getData:m,isLoading:p}},Yr={role:{},isLoading:!0},Jr=(r,e)=>(0,Ce.default)(r,t=>{switch(e.type){case"GET_DATA_SUCCEEDED":{t.role=e.role,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{t.role.name=e.name,t.role.description=e.description;break}default:return t}});var qr=n(25108),es=Object.defineProperty,ts=Object.defineProperties,rs=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,ss=Object.prototype.hasOwnProperty,ns=Object.prototype.propertyIsEnumerable,ct=(r,e,t)=>e in r?es(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,dt=(r,e)=>{for(var t in e||(e={}))ss.call(e,t)&&ct(r,t,e[t]);if(lt)for(var t of lt(e))ns.call(e,t)&&ct(r,t,e[t]);return r},as=(r,e)=>ts(r,rs(e)),os=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const is=r=>{const[e,t]=(0,s.useReducer)(Jr,Yr),l=(0,o.useNotification)(),p=(0,s.useRef)(null);(0,s.useEffect)(()=>(p.current=!0,r?d(r):t({type:"GET_DATA_SUCCEEDED",role:{}}),()=>p.current=!1),[r]);const d=i=>os(void 0,null,function*(){try{const{data:{role:a}}=yield De.Z.get(`/${g.Z}/roles/${i}`);p.current&&t({type:"GET_DATA_SUCCEEDED",role:a})}catch(a){qr.error(a),t({type:"GET_DATA_ERROR"}),l({type:"warning",message:{id:"notification.error"}})}}),m=(0,s.useCallback)(i=>{t(dt({type:"ON_SUBMIT_SUCCEEDED"},i))},[]);return as(dt({},e),{onSubmitSucceeded:m})};var ae=n(63600);const ls=ae.Ry().shape({name:ae.Z_().required(o.translatedErrors.required),description:ae.Z_().required(o.translatedErrors.required)});var cs=n(25108),ds=Object.defineProperty,us=Object.defineProperties,ps=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,ms=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,pt=(r,e,t)=>e in r?ds(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mt=(r,e)=>{for(var t in e||(e={}))ms.call(e,t)&&pt(r,t,e[t]);if(ut)for(var t of ut(e))gs.call(e,t)&&pt(r,t,e[t]);return r},fs=(r,e)=>us(r,ps(e)),vs=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const Es=()=>{const{formatMessage:r}=(0,C.useIntl)(),[e,t]=(0,s.useState)(!1),l=(0,o.useNotification)(),{lockApp:p,unlockApp:d}=(0,o.useOverlayBlocker)(),{params:{id:m}}=(0,c.useRouteMatch)(`/settings/${g.Z}/roles/:id`),{isLoading:i,routes:a}=it(),{role:u,onSubmitSucceeded:B,isLoading:F}=is(m),b=(0,s.useRef)(),V=G=>vs(void 0,null,function*(){p(),t(!0);try{const Q=b.current.getPermissions();yield De.Z.put(`/${g.Z}/roles/${m}`,fs(mt(mt({},G),Q),{users:[]})),B({name:G.name,description:G.description}),l({type:"success",message:{id:(0,ne.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(Q){cs.error(Q),l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),d()});return F?s.createElement(o.LoadingIndicatorPage,null):s.createElement(h.o,null,s.createElement(o.SettingsPageTitle,{name:"Roles"}),s.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:u.name,description:u.description},onSubmit:V,validationSchema:ls},({handleSubmit:G,values:Q,handleChange:X,errors:oe})=>s.createElement(o.Form,{noValidate:!0,onSubmit:G},s.createElement(R.T,{primaryAction:!i&&s.createElement(P.z,{disabled:u.code==="strapi-super-admin",type:"submit",loading:e,startIcon:s.createElement(we.Z,null)},r({id:"global.save",defaultMessage:"Save"})),title:u.name,subtitle:u.description,navigationAction:s.createElement(o.Link,{startIcon:s.createElement(Oe.Z,null),to:"/settings/users-permissions/roles"},r({id:"global.back",defaultMessage:"Back"}))}),s.createElement(f.D,null,s.createElement(k.K,{spacing:7},s.createElement(z.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(k.K,{spacing:4},s.createElement(M.Z,{variant:"delta",as:"h2"},r({id:(0,ne.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),s.createElement(be.r,{gap:4},s.createElement(re.P,{col:6},s.createElement(he.o,{name:"name",value:Q.name||"",onChange:X,label:r({id:"global.name",defaultMessage:"Name"}),error:oe.name?r({id:oe.name,defaultMessage:"Invalid value"}):null})),s.createElement(re.P,{col:6},s.createElement(ue.g,{name:"description",value:Q.description||"",onChange:X,label:r({id:"global.description",defaultMessage:"Description"}),error:oe.description?r({id:oe.description,defaultMessage:"Invalid value"}):null}))))),!i&&s.createElement(et,{ref:b,permissions:u.permissions,routes:a}))))))},Ps=()=>s.createElement(o.CheckPagePermissions,{permissions:E.Z.updateRole},s.createElement(Es,null)),ys=ae.Ry().shape({name:ae.Z_().required(o.translatedErrors.required),description:ae.Z_().required(o.translatedErrors.required)});var hs=n(25108),Os=Object.defineProperty,bs=Object.defineProperties,Rs=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,Cs=Object.prototype.hasOwnProperty,Ds=Object.prototype.propertyIsEnumerable,ft=(r,e,t)=>e in r?Os(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vt=(r,e)=>{for(var t in e||(e={}))Cs.call(e,t)&&ft(r,t,e[t]);if(gt)for(var t of gt(e))Ds.call(e,t)&&ft(r,t,e[t]);return r},Ts=(r,e)=>bs(r,Rs(e)),As=(r,e,t)=>new Promise((l,p)=>{var d=a=>{try{i(t.next(a))}catch(u){p(u)}},m=a=>{try{i(t.throw(a))}catch(u){p(u)}},i=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,m);i((t=t.apply(r,e)).next())});const Ms=()=>{const{formatMessage:r}=(0,C.useIntl)(),[e,t]=(0,s.useState)(!1),l=(0,o.useNotification)(),{goBack:p}=(0,c.useHistory)(),{lockApp:d,unlockApp:m}=(0,o.useOverlayBlocker)(),{isLoading:i,permissions:a,routes:u}=it(),{trackUsage:B}=(0,o.useTracking)(),F=(0,s.useRef)(),b=V=>As(void 0,null,function*(){d(),t(!0);try{const G=F.current.getPermissions();yield De.Z.post(`/${g.Z}/roles`,Ts(vt(vt({},V),G),{users:[]})),B("didCreateRole"),l({type:"success",message:{id:(0,ne.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),p()}catch(G){hs.error(G),l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),m()});return s.createElement(h.o,null,s.createElement(o.SettingsPageTitle,{name:"Roles"}),s.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:b,validationSchema:ys},({handleSubmit:V,values:G,handleChange:Q,errors:X})=>s.createElement(o.Form,{noValidate:!0,onSubmit:V},s.createElement(R.T,{primaryAction:!i&&s.createElement(P.z,{type:"submit",loading:e,startIcon:s.createElement(we.Z,null)},r({id:"global.save",defaultMessage:"Save"})),title:r({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:r({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),s.createElement(f.D,null,s.createElement(k.K,{spacing:7},s.createElement(z.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(k.K,{spacing:4},s.createElement(M.Z,{variant:"delta",as:"h2"},r({id:(0,ne.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),s.createElement(be.r,{gap:4},s.createElement(re.P,{col:6},s.createElement(he.o,{name:"name",value:G.name||"",onChange:Q,label:r({id:"global.name",defaultMessage:"Name"}),error:X.name?r({id:X.name,defaultMessage:"Invalid value"}):null})),s.createElement(re.P,{col:6},s.createElement(ue.g,{name:"description",value:G.description||"",onChange:Q,label:r({id:"global.description",defaultMessage:"Description"}),error:X.description?r({id:X.description,defaultMessage:"Invalid value"}):null}))))),!i&&s.createElement(et,{ref:F,permissions:a,routes:u}))))))},xs=()=>s.createElement(o.CheckPagePermissions,{permissions:E.Z.createRole},s.createElement(Ms,null)),Ls=()=>s.createElement(o.CheckPagePermissions,{permissions:E.Z.accessRoles},s.createElement(c.Switch,null,s.createElement(c.Route,{path:`/settings/${g.Z}/roles/new`,component:xs,exact:!0}),s.createElement(c.Route,{path:`/settings/${g.Z}/roles/:id`,component:Ps,exact:!0}),s.createElement(c.Route,{path:`/settings/${g.Z}/roles`,component:Te,exact:!0}),s.createElement(c.Route,{path:"",component:o.NotFound})))},89881:(S,w,n)=>{var s=n(47816),c=n(99291),o=c(s);S.exports=o},69199:(S,w,n)=>{var s=n(89881),c=n(98612);function o(g,E){var P=-1,y=c(g)?Array(g.length):[];return s(g,function(R,v,f){y[++P]=E(R,v,f)}),y}S.exports=o},82689:(S,w,n)=>{var s=n(29932),c=n(97786),o=n(67206),g=n(69199),E=n(71131),P=n(7518),y=n(85022),R=n(6557),v=n(1469);function f(h,j,O){j.length?j=s(j,function(x){return v(x)?function(M){return c(M,x.length===1?x[0]:x)}:x}):j=[R];var T=-1;j=s(j,P(o));var D=g(h,function(x,M,W){var K=s(j,function(C){return C(x)});return{criteria:K,index:++T,value:x}});return E(D,function(x,M){return y(x,M,O)})}S.exports=f},71131:S=>{function w(n,s){var c=n.length;for(n.sort(s);c--;)n[c]=n[c].value;return n}S.exports=w},26393:(S,w,n)=>{var s=n(33448);function c(o,g){if(o!==g){var E=o!==void 0,P=o===null,y=o===o,R=s(o),v=g!==void 0,f=g===null,h=g===g,j=s(g);if(!f&&!j&&!R&&o>g||R&&v&&h&&!f&&!j||P&&v&&h||!E&&h||!y)return 1;if(!P&&!R&&!j&&o<g||j&&E&&y&&!P&&!R||f&&E&&y||!v&&y||!h)return-1}return 0}S.exports=c},85022:(S,w,n)=>{var s=n(26393);function c(o,g,E){for(var P=-1,y=o.criteria,R=g.criteria,v=y.length,f=E.length;++P<v;){var h=s(y[P],R[P]);if(h){if(P>=f)return h;var j=E[P];return h*(j=="desc"?-1:1)}}return o.index-g.index}S.exports=c},99291:(S,w,n)=>{var s=n(98612);function c(o,g){return function(E,P){if(E==null)return E;if(!s(E))return o(E,P);for(var y=E.length,R=g?y:-1,v=Object(E);(g?R--:++R<y)&&P(v[R],R,v)!==!1;);return E}}S.exports=c},35161:(S,w,n)=>{var s=n(29932),c=n(67206),o=n(69199),g=n(1469);function E(P,y){var R=g(P)?s:o;return R(P,c(y,3))}S.exports=E},89734:(S,w,n)=>{var s=n(21078),c=n(82689),o=n(5976),g=n(16612),E=o(function(P,y){if(P==null)return[];var R=y.length;return R>1&&g(P,y[0],y[1])?y=[]:R>2&&g(y[0],y[1],y[2])&&(y=[y[0]]),c(P,s(y,1),[])});S.exports=E},13217:(S,w,n)=>{var s=n(14259);function c(o){var g=o==null?0:o.length;return g?s(o,1,g):[]}S.exports=c},48734:(S,w,n)=>{"use strict";n.d(w,{U:()=>j,y:()=>f});var s=n(67294),c=n(45697),o=n(71893),g=n(72735),E=n(13819),P=n(41762),y=n(35961),R=n(46273);const v=({theme:O,expanded:T,variant:D,disabled:x,error:M})=>M?`1px solid ${O.colors.danger600} !important`:x?`1px solid ${O.colors.neutral150}`:T?`1px solid ${O.colors.primary600}`:D==="primary"?`1px solid ${O.colors.neutral0}`:`1px solid ${O.colors.neutral100}`,f=(0,o.default)(g.Z)``,h=(0,o.default)(y.x)`
  border: ${v};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:O})=>O.colors.primary600};

    ${f} {
      color: ${({theme:O,expanded:T})=>T?void 0:O.colors.primary700};
    }

    ${g.Z} {
      color: ${({theme:O,expanded:T})=>T?void 0:O.colors.primary600};
    }

    & > ${R.k} {
      background: ${({theme:O})=>O.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:O})=>O.colors.primary200};
    }
  }
`,j=({children:O,expanded:T,id:D,size:x,variant:M,disabled:W,error:K,hasErrorMessage:C,onToggle:U,toggle:I})=>{const _=(0,P.M)("accordion",D);return s.createElement(E.S.Provider,{value:{expanded:T,onToggle:U,toggle:I,id:_,size:x,variant:M,disabled:W}},s.createElement(h,{"data-strapi-expanded":T,disabled:W,"aria-disabled":W,expanded:T,hasRadius:!0,variant:M,error:K},O),K&&C&&s.createElement(y.x,{paddingTop:1},s.createElement(g.Z,{variant:"pi",textColor:"danger600"},K)))};j.defaultProps={disabled:!1,error:void 0,expanded:!1,hasErrorMessage:!0,id:void 0,toggle:void 0,size:"M",variant:"primary",onToggle:void 0},j.propTypes={children:c.node.isRequired,disabled:c.bool,error:c.string,expanded:c.bool,hasErrorMessage:c.bool,id:c.string,onToggle:c.func,size:c.oneOf(["S","M"]),toggle:c.func,variant:c.oneOf(["primary","secondary"])}},63081:(S,w,n)=>{"use strict";n.d(w,{v:()=>j});var s=n(67294),c=n(45697),o=n(13819),g=n(35961),E=Object.defineProperty,P=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,v=(O,T,D)=>T in O?E(O,T,{enumerable:!0,configurable:!0,writable:!0,value:D}):O[T]=D,f=(O,T)=>{for(var D in T||(T={}))y.call(T,D)&&v(O,D,T[D]);if(P)for(var D of P(T))R.call(T,D)&&v(O,D,T[D]);return O},h=(O,T)=>{var D={};for(var x in O)y.call(O,x)&&T.indexOf(x)<0&&(D[x]=O[x]);if(O!=null&&P)for(var x of P(O))T.indexOf(x)<0&&R.call(O,x)&&(D[x]=O[x]);return D};const j=O=>{var T=O,{children:D}=T,x=h(T,["children"]);const{expanded:M,id:W}=(0,o.A)();if(!M)return null;const K=`accordion-content-${W}`,C=`accordion-label-${W}`,U=`accordion-desc-${W}`;return s.createElement(g.x,f({role:"region",id:K,"aria-labelledby":C,"aria-describedby":U},x),D)};j.propTypes={children:c.node.isRequired}},13819:(S,w,n)=>{"use strict";n.d(w,{A:()=>o,S:()=>c});var s=n(67294);const c=(0,s.createContext)(),o=()=>(0,s.useContext)(c)},74756:(S,w,n)=>{"use strict";n.d(w,{B:()=>_});var s=n(67294),c=n(45697),o=n(12645),g=n(71893),E=n(39785),P=n(72735),y=n(48734),R=n(13819),v=n(46273),f=n(7681),h=n(52624);const j=({expanded:A,disabled:L,variant:$})=>{let Z;return A?Z="primary100":L?Z="neutral150":$==="primary"?Z="neutral0":Z="neutral100",Z};var O=n(25108),T=Object.defineProperty,D=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,W=(A,L,$)=>L in A?T(A,L,{enumerable:!0,configurable:!0,writable:!0,value:$}):A[L]=$,K=(A,L)=>{for(var $ in L||(L={}))x.call(L,$)&&W(A,$,L[$]);if(D)for(var $ of D(L))M.call(L,$)&&W(A,$,L[$]);return A},C=(A,L)=>{var $={};for(var Z in A)x.call(A,Z)&&L.indexOf(Z)<0&&($[Z]=A[Z]);if(A!=null&&D)for(var Z of D(A))L.indexOf(Z)<0&&M.call(A,Z)&&($[Z]=A[Z]);return $};const U=(0,g.default)(E.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:A,expanded:L})=>L?A.colors.primary600:A.colors.neutral500};
    }
  }
`,I=(0,g.default)(v.k)`
  min-height: ${({theme:A,size:L})=>A.sizes.accordions[L]};
  border-radius: ${({theme:A,expanded:L})=>L?`${A.borderRadius} ${A.borderRadius} 0 0`:A.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:A})=>A.colors.primary600};
      }
    }
  }
`,_=A=>{var L=A,{title:$,description:Z,as:N,togglePosition:ee,action:te}=L,se=C(L,["title","description","as","togglePosition","action"]);const ie=(0,s.useRef)(null),{onToggle:me,toggle:ge,expanded:H,id:le,size:J,variant:fe,disabled:q}=(0,R.A)(),ce=`accordion-content-${le}`,ve=`accordion-label-${le}`,Ee=`accordion-desc-${le}`,de=J==="M"?6:4,Pe=J==="M"?de:de-2,Le=j({expanded:H,disabled:q,variant:fe}),Te={as:N,fontWeight:J==="S"?"bold":void 0,id:ve,textColor:H?"primary600":"neutral700",ellipsis:!0,variant:J==="M"?"delta":void 0},ye=H?"primary600":"neutral600",k=H?"primary200":"neutral200",z=J==="M"?`${32/16}rem`:`${24/16}rem`,he=()=>{q||(ge&&!me?(O.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),ge()):me())},ue=s.createElement(v.k,{justifyContent:"center",borderRadius:"50%",height:z,width:z,transform:H?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,disabled:q,"aria-hidden":!0,as:"span",background:k,cursor:q?"not-allowed":"pointer",onClick:()=>{var Oe;return(Oe=ie==null?void 0:ie.current)==null?void 0:Oe.click()},shrink:0},s.createElement(h.J,{as:o.default,width:J==="M"?`${11/16}rem`:`${8/16}rem`,color:H?"primary600":"neutral600"}));return s.createElement(I,{paddingBottom:Pe,paddingLeft:de,paddingRight:de,paddingTop:Pe,background:Le,expanded:H,size:J,justifyContent:"space-between",cursor:q?"not-allowed":""},s.createElement(f.K,{horizontal:!0,spacing:3,flex:1,maxWidth:"100%"},ee==="left"&&ue,s.createElement(U,K({ref:ie,onClick:he,"aria-disabled":q,"aria-expanded":H,"aria-controls":ce,"aria-labelledby":ve,"data-strapi-accordion-toggle":!0,expanded:H,type:"button",flex:1,minWidth:0},se),s.createElement(s.Fragment,null,s.createElement(y.y,K({},Te),$),Z&&s.createElement(P.Z,{as:"p",id:Ee,textColor:ye},Z))),ee==="right"&&s.createElement(f.K,{horizontal:!0,spacing:3},ue,te),ee==="left"&&te))};_.defaultProps={action:void 0,as:"span",description:void 0,variant:"primary",togglePosition:"right"},_.propTypes={action:c.node,as:c.string,description:c.string,title:c.string.isRequired,togglePosition:c.oneOf(["right","left"]),variant:c.oneOf(["primary","secondary"])}},36989:(S,w,n)=>{"use strict";n.d(w,{Z:()=>R});var s=n(67294),c=n(45697),o=n(71893),g=n(35961),E=n(46273);const P=(0,o.default)(E.k)`
  & > * + * {
    margin-left: ${({theme:v})=>v.spaces[2]};
  }

  margin-left: ${({pullRight:v})=>v?"auto":void 0};
`,y=(0,o.default)(P)`
  flex-shrink: 0;
`,R=({startActions:v,endActions:f})=>v||f?s.createElement(g.x,{paddingLeft:10,paddingRight:10},s.createElement(g.x,{paddingBottom:4},s.createElement(E.k,{justifyContent:"space-between",alignItems:"flex-start"},v&&s.createElement(P,{wrap:"wrap"},v),f&&s.createElement(y,{pullRight:!0},f)))):null;R.defaultProps={endActions:void 0,startActions:void 0},R.propTypes={endActions:c.node,startActions:c.node}},39785:(S,w,n)=>{"use strict";n.d(w,{A:()=>K});var s=n(67294),c=n(45697),o=n(71893),g=n(86647),E=n(35961),P=n(72735),y=n(46273),R=n(15585),v=Object.defineProperty,f=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,O=(C,U,I)=>U in C?v(C,U,{enumerable:!0,configurable:!0,writable:!0,value:I}):C[U]=I,T=(C,U)=>{for(var I in U||(U={}))h.call(U,I)&&O(C,I,U[I]);if(f)for(var I of f(U))j.call(U,I)&&O(C,I,U[I]);return C},D=(C,U)=>{var I={};for(var _ in C)h.call(C,_)&&U.indexOf(_)<0&&(I[_]=C[_]);if(C!=null&&f)for(var _ of f(C))U.indexOf(_)<0&&j.call(C,_)&&(I[_]=C[_]);return I};const x=o.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,M=o.default.div`
  animation: ${x} 2s infinite linear;
  will-change: transform;
`,W=(0,o.default)(y.k)`
  background: transparent;
  border: none;

  &[aria-disabled='true'] {
    pointer-events: none;
    svg path {
      fill: ${({theme:C})=>C.colors.neutral600};
    }
  }

  svg {
    display: flex;
    font-size: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:C})=>C.colors.primary600};
  }

  ${R.BF}
`,K=s.forwardRef((C,U)=>{var I=C,{children:_,startIcon:A,endIcon:L,onClick:$,disabled:Z,loading:N}=I,ee=D(I,["children","startIcon","endIcon","onClick","disabled","loading"]);const te=$&&!Z?$:void 0,se=Z||N;return s.createElement(W,T({ref:U,"aria-disabled":se,onClick:te,as:"button",type:"button"},ee),(A||N)&&s.createElement(E.x,{as:"span",paddingRight:2,"aria-hidden":!0},N?s.createElement(M,null,s.createElement(g.default,null)):A),s.createElement(P.Z,{variant:"pi",textColor:se?"neutral600":"primary600"},_),L&&s.createElement(E.x,{as:"span",paddingLeft:2,"aria-hidden":!0},L))});K.displayName="TextButton",K.defaultProps={disabled:!1,startIcon:void 0,endIcon:void 0,loading:!1,onClick:void 0},K.propTypes={children:c.node.isRequired,disabled:c.bool,endIcon:c.element,loading:c.bool,onClick:c.func,startIcon:c.element}},67109:(S,w,n)=>{"use strict";n.d(w,{Z:()=>R});var s=n(67294),c=Object.defineProperty,o=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,P=(v,f,h)=>f in v?c(v,f,{enumerable:!0,configurable:!0,writable:!0,value:h}):v[f]=h,y=(v,f)=>{for(var h in f||(f={}))g.call(f,h)&&P(v,h,f[h]);if(o)for(var h of o(f))E.call(f,h)&&P(v,h,f[h]);return v};function R(v){return s.createElement("svg",y({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v),s.createElement("path",{d:"M24 13.3a.2.2 0 01-.2.2H5.74l8.239 8.239a.2.2 0 010 .282L12.14 23.86a.2.2 0 01-.282 0L.14 12.14a.2.2 0 010-.282L11.86.14a.2.2 0 01.282 0L13.98 1.98a.2.2 0 010 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6z",fill:"#212134"}))}},78114:(S,w,n)=>{"use strict";n.d(w,{Z:()=>R});var s=n(67294),c=Object.defineProperty,o=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,P=(v,f,h)=>f in v?c(v,f,{enumerable:!0,configurable:!0,writable:!0,value:h}):v[f]=h,y=(v,f)=>{for(var h in f||(f={}))g.call(f,h)&&P(v,h,f[h]);if(o)for(var h of o(f))E.call(f,h)&&P(v,h,f[h]);return v};function R(v){return s.createElement("svg",y({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 00-.374.68v1.65a.797.797 0 00.384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 00.216.744l1.167 1.166a.801.801 0 00.744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 00.679.374h1.649a.797.797 0 00.686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 00.744-.216l1.166-1.167a.803.803 0 00.216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 00.374-.679v-1.649a.796.796 0 00-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 00-.216-.744l-1.166-1.173a.802.802 0 00-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 00-.68-.374h-1.65a.797.797 0 00-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 00-.744.216L2.921 4.094a.802.802 0 00-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8zM12 17a5 5 0 100-10 5 5 0 000 10z",fill:"#212134"}))}}}]);
